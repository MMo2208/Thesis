\documentclass[12pt,a4paper]{article}

\usepackage{graphicx}
 \usepackage{subfigure} 
 \usepackage[english]{babel}
 \usepackage[format=default,font=footnotesize,labelfont=bf]{caption}
\usepackage[ansinew]{inputenc} 		%Umlaute
\usepackage[T1]{fontenc} 				%Umlaute		
\usepackage[margin=1in]{geometry}		%Randabstand
\usepackage[onehalfspacing]{setspace}	%Zeilenabstand 1,5

\usepackage{floatflt}					%Umflossene Grafiken
\usepackage{float}
\usepackage[section]{placeins}
\usepackage{afterpage}
\usepackage{tabularx}

				%Highlight-boxen

\usepackage[framemethod=tikz]{mdframed}
\usepackage{lipsum}
\usepackage[many]{tcolorbox}

\newtcolorbox{myboxii}[1][]{
  breakable,
  freelance,
  title=#1,
  colback=white,
  colbacktitle=white,
  coltitle=black,
  fonttitle=\bfseries,
  bottomrule=0pt,
  boxrule=0pt,
  colframe=white,
  overlay unbroken and first={
  \draw[red!75!black,line width=3pt]
    ([xshift=5pt]frame.north west) -- 
    (frame.north west) -- 
    (frame.south west);
  \draw[red!75!black,line width=3pt]
    ([xshift=-5pt]frame.north east) -- 
    (frame.north east) -- 
    (frame.south east);
  },
  overlay unbroken app={
  \draw[red!75!black,line width=3pt,line cap=rect]
    (frame.south west) -- 
    ([xshift=5pt]frame.south west);
  \draw[red!75!black,line width=3pt,line cap=rect]
    (frame.south east) -- 
    ([xshift=-5pt]frame.south east);
  },
  overlay middle and last={
  \draw[red!75!black,line width=3pt]
    (frame.north west) -- 
    (frame.south west);
  \draw[red!75!black,line width=3pt]
    (frame.north east) -- 
    (frame.south east);
  },
  overlay last app={
  \draw[red!75!black,line width=3pt,line cap=rect]
    (frame.south west) --
    ([xshift=5pt]frame.south west);
  \draw[red!75!black,line width=3pt,line cap=rect]
    (frame.south east) --
    ([xshift=-5pt]frame.south east);
  },
}

\usepackage{fancyhdr}
\pagestyle{fancy}

\usepackage{listings}				%Codelisting
\usepackage{color}
\usepackage{acronym}				%Abkürzungen
 
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}
 
\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}
 
\lstset{style=mystyle}


\fancyfoot{}
\fancyfoot[R]{\thepage}

\usepackage{hyperref}
\usepackage{multibib} 
\newcites{Refs,Urls}{Literaturverzeichnis,Verzeichnis der Webadressen}

\usepackage{url}

\begin{document}

%==================Deckblatt===========================%
\ \vspace{0.1cm} 
\begin{center} 

\begin{huge} 
Bachelorthesis \\ 
\end{huge}
\ \\
\vspace{1cm} 

\noindent\rule{16cm}{-2em} 
\hrule\par\rule[-1em]{0pt}{2.5em}
\begin{large}
\textbf{Development of a Web-Application\\
for executing tasks on an IBM-Mainframe\\
in the context of Education\\}
\vspace{0.3cm}
\end{large}
\hrule\par\rule{0pt}{2em}
\ \\
\vspace{1cm} 


\begin{small}
Bachelorarbeit gemäß § 17 der Allgemeinen Prüfungsordnung vom 01.08.2008 \\im Bachelorstudiengang Informationsmanagement und Unternehmenskommunikation \\an der Hochschule für angewandte Wissenschaften Neu-Ulm \\
\end {small}

\vspace{3cm} 


\end {center}

\begin{table} [!h]
\begin{tabular}{lll}

	Erstkorrektor	& 	&	Prof. Dr. Phillipp Brune \\
	Betreuer 		& 	&	Dr. Kevin Henrichs \\
	 & & \\
	Verfasser		&	&	Marc Morschhauser (Matr.-Nr.: 204041)\\
	 & & \\
	  & & \\
	   & & \\
	Thema erhalten: & & 01.01.2020 \\
	Arbeit abgegeben & & 01.05.2020 \\

\end{tabular}
\label{tab:threecols}
\end{table}


\vspace{3cm} 
\noindent\rule{7.5cm}{1pt}\hspace{1cm}\noindent\rule{7.5cm}{1pt}
\hspace*{1cm}Unterschrift des Studierenden\hspace{2.7cm}Unterschrift und Firmenstempel der \\
\hspace*{10.5cm}Ausbildungsstelle
\thispagestyle{empty}
\newpage
%==================Ende Deckblatt===========================%
\begin{center}
In association with:
\vspace{1.5cm}
\begin{figure}[h]
	\centering
	\includegraphics[scale=0.25]{img/Logos.jpg}
\end{figure}

\end{center}
\thispagestyle{empty}
\newpage
%==================Ende Logos===========================%

\pagenumbering{Roman}

\section{Abstract}
Hier kommt der/die/das Abstract.\\

\newpage

\listoffigures

\newpage
\section{List of abbreviations}
\begin{acronym}[Bash]
	 \acro{IoT}{Internet of Things}
	 \acro{I/O}{Input / Output}
 	 \acro{OS}{Operating System}
	 \acro{ULE}{Ubiquitous Learning Environment}
	 \acro{JCL}{Job Control Language}
 	 \acro{JES}{Job Entry Subsystem}
 	 \acro{OLTP}{Online Transaction Processing}
	 \acro{LPAR}{Logial Partitions}
	\acro{LAN}{Local Area Network}
	\acro{FTP}{File Transfer Protocol}
	\acro{SSH}{Secure Shell}
	\acro{SFTP}{Secure File Transfer Protocol}
\end{acronym}

\newpage

\tableofcontents

\newpage

\pagenumbering{arabic}




%===========Main Content=========%
\setcounter{page}{3}
%\begin{onehalfspacing}

\newpage

\section{Introduction}
Big Data, Cloud, Blockchain, \ac{IoT}  - Digitalization is steadily proceeding and with it the amount of data that has to be processed every day. Many web-services at this point are dependent on flexibility in first place. Big server farms facilitate an unprecedented agility to operators of online-businesses referring to their resource-planning. Urgent situations with high data traffic can be handled by adding physical or also virtual servers within minutes. However there are services where minutes make the difference between millions of euros. Those services demand for information technology, which not only has a high data throughput but also ensures the highest availability. The IBM Mainframe in its newest construction provides an \ac{I/O} of 288GB per second  while being available 99,999\% of the time running. This makes the Mainframe a cornerstone in present finance-sector's IT-management. Due to it's security and it's high speed it also finds it's use in other big industries - thus also insurances, the aerospace industry or big retail companies benefit from this supercomputer.\\
But since the IT improved considerably over the last decades, the Mainframe was presumed dead and many companies discontinued training their staff to maintain this technology. Contrary to their expectations they are dependent on it till today and they will presumably be in the remote future. What is left is a big gap in the division of skilled professionals that is hard to close.\\
The Goethe-University in Frankfurt, Germany, attends to participate in closing this gap. Therefore the university procured one of the aforementioned IBM supercomputers to train their students dealing with it.\\
\ \\
This Bachelor Thesis approaches a Front-End-Application, which will be running on a Linux Virtual-Machine but executing tasks on the mainframe's \ac{OS} called z/OS. By building this bridge between the Linux VM and the z/OS, students will be able to get in touch with the Mainframe located in Frankfurt University through a web-browser and as a consequence experience how the system is working.\\
\ \\
The resources for this activity are allocated by the \textit{Talentschmiede AG} - a Frankfurt located IT consultancy which is in close contact to the finance sector and knows and cares about the gap of skilled professionals. Further it is supported by the \textit{Academic Mainframe Consortium e.V.} - an association founded by Mainframe Experts which are also willing to acquire new educated staff in the division of Mainframe.
\newpage

\section{Related Work}
While a malicious tongue once suggested that " the last mainframe will be unplugged in 1996 " , it reconsidered when IBM introduced it's latest version of it in 2008 \cite{lohr2008old}. Till the present day the mainframe is the backbone of the financial markets worldwide and just as important for other big industries\cite{carayannisenterprise} \cite{lohr2006ibm}.
The view on the mainframe technology as an IT-dinosaur has to change and the need of adding the mainframe technology to the IS Curriculum in a wide range was overdue already 10 years before \cite{wallis2007s} \cite{wong2009old} \cite{douglas2009enterprise}. Sharma et al. analysed the need of Large System Education regarding to mainframe education and they are investigating " the   academic response   to   the   need   for   large   systems specialists " \cite{sharma2011teach}. In \cite{corridori2009ways} A. Corridori addresses the concerns and the opportunites that come with adding mainframe content to universities curricula and also previews ways to do this. How the economy and with it, the labor market can benefit from it is stated in \cite{sharmaalive}. \\
\ \\
The potentials of present digital media used to educate in a wide range is discovered by Cope et al. \cite{cope2009ubiquitous}. It is described that "the learner's  relationship  to knowledge  and  the  processes  of  pedagogy  have  not  changed  in  any  significant  way" but through technology " the educational paradigm has changed ". Vicki Jones et al. also address the integration of modern information technology in everyday's life and the advantages of this change regarding education \cite{jones2004ubiquitous}. Here it is stated that " Adaptive learning can offer great advantages in providing students with specific and personalised knowledge as and when required ". While the term " Adaptive Learning " is responsive to the methods that are used to transfer knowledge \cite{midgley2014goals} , " \ac{ULE} " describes an environment with the possibility of learning everywhere and anytime\cite{hwang2008criteria}. Hwang et al. emphasize the fact, that ULEs are an innovative approach for teaching complex topics \cite{hwang2009context}. To establish a ULE there are many technologies needed \cite{sakamura2005ubiquitous}, this thesis is supposed to do a first step in this direction to learn on the Mainframe anywhere and anytime.\\

\ \\
......

\newpage

\section{An overview on the IBM Mainframe}
Prior to entering the main issue of implementing the web-application, this chapter introduces a few mainframe terminologies to assure a full understanding of the steps that take place in the following chapters. \\
While many people just take the easy way by calling almost every computer a \textit{server}, the term \textit{mainframe} is often just used to point out that this is largest server in use. In this thesis the term \textit{mainframe} describes the IBM Supercomputer which is capable of "supporting thousands of 
applications and input/output devices to simultaneously serve thousands of users" \cite{ebbers2016introduction}.\\
So the most common utilization of the mainframe is divided in two categories: 
\begin{itemize}
\item \ac{OLTP}, incl. web-based applications
\item Batch Processing
\end{itemize}

\begin{figure}[h]
	\centering
	\includegraphics[scale=0.5]{img/batchtrans.png}
	\caption{Typical workloads}
	\label{Typical workloads}
\end{figure}
\ \\
\subsection{Online Transaction Processing}
One of the core functions of many businesses is OLTP. For this case the mainframe serves a large amount of applications to make it possible to execute thousands of transactions in short time while handling not only a huge amount of different transaction types, but also to do this with many different users at a glance.\\
For end-users those transaction processes are often commonly known, while they appear in everyday's life, such as:
\begin{itemize}
\item Credit card payments in supermarkets
\item ATM transactions
\item Online purchasings
\end{itemize}

\textbf{---- Explain Online part and why not consolidated in this thesis ---- }

\subsection{Batch Processing}
The other main function of the mainframe is processing data in a batch. Eventually terabytes of. These processes are generally done without much user interaction. A batch job simply gets committed and processes the data that is determined in the job-statement ( further informations in chapter \ref{JCL} )

\textit{ An 
equivalent concept can be found in a UNIX script file or a Windows command 
file, but a z/OS batch job might process millions of records.}\\

\textbf{---- Explain deeper and bridge to System Operators ---- }


\ \\
\subsection{Separation of duties}
distinguish between:
\begin{itemize}
\item System programmers 
\item System administrators (for example, DBA, storage, network, security, and 
performance)
\item Application designers and programmers 
\item \textbf{System operators (explain)}
\item Production control analysts
\end{itemize}
\ \\
\subsection{Mainframe Operation Systems}
z/OS\\
z/VM\\
z/VSE\\
Linux for zSeries\\
z/TPF\\
\ \\

\subsection{Virtualisation with z/VM}
\textit{As an aid to consolidation, the mainframe offers software virtualization, through z/VM. z/VM?s extreme virtualization capabilities, which have been perfected since its introduction in 1967, make it possible to virtualize thousands of  distributed servers on a single server, resulting in the significant reduction in the use of space and energy. }
\ \\
\textit{z/Virtual Machine (z/VM) has two basic components: a control program (CP) and 
a single-user operating system (CMS). As a control program, z/VM is a hypervisor because it runs other operating systems in the virtual machines it creates. Any of the IBM mainframe operating systems such as z/OS, Linux on System z, z/VSE, and z/TPF can be run as guest systemsin their own virtual machines, and z/VM can run any combination of guest systems. }\\
\textbf{---- Explain and show z/VM Constellation, LPARs etc ---- }
\ \\
more in : \url{http://www.redbooks.ibm.com/redbooks/pdfs/sg247603.pdf}
\newpage

\section{Research gap}
Get Access to Batch process in division of education\\
\newpage


\section{Dive into \ac{JCL}}
\label{JCL}
\textbf{---- Important to understand JCL for accessing JES Spool?! ---- }\\
\ \\
To get familiar with JCL, this chapter will give an introduction in how these Statements are working. There is talk about "Statements", because JCL is used to tell the OS what to do. Each Statement is an independent work unit, known as "Job" - therefore this language is called "Job Control Language". Each Job consists of instructions that are either typed in by an operator or they are stored and get transmitted to the computer. \\ 

\subsection{Job Control Environment}
So to understand how a job is executed, it is important to know which components are needed for this process.\\
\begin{figure}[h]
	\centering
	\includegraphics[scale=0.25]{img/JCL-1.jpg}
	\caption{JCL Functionality, Source: IBM}
	\label{JCL Functionality}
\end{figure}
\ \\
On figure \ref{JCL Functionality} you can see a job process described in 7 steps.\\
\begin{enumerate}
\item JCL submit 
\item JCL requests program 
\item Program gets loaded
\item Resources for program get allocated through JCL
\item Resources get provided to program
\item Program writes output to JES Spool
\item Output to gets transferred to printer as requested
\end{enumerate}
\ \\
The z/OS has written (hard coded) application programs which are not associated with any physical resources. Those programs are just names, which include internal file-names. Through JCL those programs can be opened for reading and writing during execution.\\
The \ac{JES} is there to evaluate and accept or not accept a job. If the syntax is right and the job is accepted the JES runs it on the OS and controls this process. The results get transferred to an output unit.\\


\subsection{Job structure}
-each statement 80characters\\
-JCL is introduced with // \\

\subsubsection{EXEC-Statements}
Within a job, there are working executions introduced through an "EXEC-statement". Every job needs at least one execution, but there can obviously be many more in addition. If a job has no execution it stops.
\ \\
\begin{lstlisting}[language=PHP]
//STEP0001 EXEC PGM=IEBGENER
...
//STEP0002 EXEC PROC=PRDPROC1
//STEP0003 EXEC PRDPROC2
\end{lstlisting}


\subsubsection{DD-Statements}
\begin{itemize}
\item{SYSUT1}
\item{SYSUT2}
\item{SYSIN}
\item{SYSPRINT}
\end{itemize}
-JCL links the program file names with physical resources (e.g. data set names or unix file names).\\
--JCL is used to process programs in the background ("batch")\\
- And to process programs in the foreground("started task")\\
-JCL instruct z/OS -> Start / submit
- JCL SUBMIT Statement will result in batch process of one or more programs (BACKGROUND)\\
- JCL START will result in FOREGROUND processing of a processing program\\
\ \\
\subsubsection{Background / Foreground jobs}
Every Batch Job must contain JOB-statement \& EXEC statement\\
->JOB statement highlight the beginning of a batch job \& assigns a name to the job\\
JCL started tasks do not require a JOB Statement
->both have at least one EXEC statement -> marks the beginning of a job step , assigns name to the step \& identifies the program or procedure to be executed in the step.

\newpage

\section{Access possibilities}
In order to execute JCL-Jobs on z/OS from the Linux host, an access point is required to submit the data. This chapter is to reveal how the z/VM connects the Linux-host and the z-OS Target-system in this case and how this connection can be used to transfer data among them.\\
To enable the communication between different applications, a protocol is needed. The protocol that is used in the System Z is the \ac{TCP}/\ac{IP}, which is provided through the HiperSockets function. HiperSockets is a technology developed by IBM to enable high-speed communication between \ac{LPAR} with a hypervisor or between applications inside a z/VM as it is the case here.\\
You could imagine a HiperSockets-network like an internal \ac{LAN}, linking all partitions for internal communication.\\

\begin{figure}[h]
	\centering
	\includegraphics[scale=0.7]{img/Hiper.png}
	\caption{TCP/IP Connection / Hipersockets}
	\label{Hipersockets}
\end{figure}
\ \\
\begin{figure}[h]
	\centering
	\includegraphics[scale=0.7]{img/workloads.png}
	\caption{workloads}
	\label{workloads}
\end{figure}

\textbf{---- Explain Hipersockets / TCP/IP Connection ---- }\\
A way we can use this connection to transfer jcl-jobs is:
\ \\
\begin{myboxii}[Transmission Control Protocol]
The Transmission Control Protocol (TCP) provides a reliable vehicle for delivering
packets between hosts on an internet. TCP takes a stream of data, breaks it into
datagrams, sends each one individually using IP, and reassembles the datagrams at
the destination node. If any datagrams are lost or damaged during transmission,
TCP detects this and resends the missing datagrams. The received data stream is a
reliable copy of the transmitted data stream.

\textbf{---- Explain TCP/IP Connection in own words ---- }\\

\end{myboxii}
\ \\
\subsection{Access through Java with FTP}
What becomes possible through the TCP/IP in System Z is the \ac{FTP} Server, an IP-application used to transfer files between any kind of platform. The z/OS FTP-Server is a bit different from normal FTP-Servers as it provides not only the possibility to transfer files and get access to z/OS System Services, but it also provides access to the Job Entry Subsystem which is, as mentioned in  chapter \ref{JCL}, needed to submit JCL-Jobs.\\

With the help of Java you can use the FTP server to get access to a number of JES functions, including the following:
\begin{itemize}
\item Submitting a job
\item Displaying the status of jobs
\item Receiving the spool output of a job (JCL messages and SYSOUT)
\item Deleting a job
\item Submitting a job and automatically receiving output
\end{itemize}
\ \\
\textbf{---- Importance of output for Learning environment ---- }\\

\subsection{Access via \ac{SSH}/ \ac{SFTP}}
While FTP gives us the opportunity to get access to the JES-Spool to run JCL-Jobs, this is not really a safe way to work this out.\\
To get a safe communication, it needs encryption what can be established through the SSH-protocol - making the FTP a Secure File Transfer Protocol.\\

\begin{myboxii}[The Secure Shell Protocol]
The SSH protocol (also referred to as Secure Shell) is a method for secure remote login from one computer to another. It provides several alternative options for strong authentication, and it protects the communications security and integrity with strong encryption. It is a secure alternative to the non-protected login protocols (such as telnet, rlogin) and insecure file transfer methods (such as FTP). 
\textbf{---- Explain SSH in own words ---- }\\

\end{myboxii}

\newpage

\section{Requirements}
installing z/VM and Creating Linux or z/OS Guests
\url{http://www.redbooks.ibm.com/redbooks/pdfs/sg247603.pdf}
from p.137
\newpage



\section{Development Environment}
In this chapter, a development environment will be created. An Oracle Virtual-Machine called VirtualBox will be installed on MacOSX. In this virtual machine the open and free Linux-System Ubuntu 16.04 LTS will be running, to make it possible to implement an Apache HTTP-Server. The Apache Server makes it possible to develop a simple dynamic website offline on a localhost that can be accessed through any web-browser as long as the virtual machine is running.\\
\\Schematische Darstellung!!


\newpage

\section{Die Entwicklungsumgebung}
In diesem Kapitel soll eine optimale Entwicklungsumgebung für das Projekt geschaffen werden. Hierfür wird ein Apache Web-Server innerhalb einer virtuellen Linux-Partition implementiert. Sowohl Linux als auch bei Apache handelt es sich um freie open-source Projekte.\\
-Kostenersparnis durch open-source projekte?!-\\
-Gründe für Linux / Apache ???!-



\subsection{Einrichten einer Linux-VM}
Passend für den Apache Web-Server ist die Ubuntu Server GUI. \\
Installiert wird diese in der Virtual-Box von Oracle. \\

Für dieses Vorhaben wird die Ubuntu Version Server 16.04.3 LTS herangezogen.\\
\ \\

VirtualBox wird als Maschine verwendet, um den Linux-Server zu beherbergen.\\
Hier wird eine neue Virtuelle Maschine erstellt. \\
Dem Projekt wird der Name sandbox verliehen, was eine isolierte,  von der Öffentlichkeit -zunächst- abgeschottete Umgebung impliziert. Zusätzlich wird hier bereits von Anfang an festgelegt, dass es sich um einen Linux und genauer um eine 64-Bit VM mit dem Ubuntu OS handeln soll.\\
Eine dynamische HDD Zuweisung sorgt dafür, dass die Servergröße nicht um Vorhinein festgelegt werden muss, sondern mitwächst, sollte mehr Speicherplatz benötigt werden. Die Größe ist natürlich durch die lokale Festplatte  begrenzt. \\Erklärung localhost!?\\

Um eine lokale Entwicklung auf diesem Server zu ermöglichen, sind einige Konfigurationen nötig.\\
Neben der Bereitstellung der richtigen Linux-Version (Für dieses Vorhaben wird die Ubuntu Version Server 16.04.3 LTS herangezogen.) wird hier die Verteilung der Virtual Machine auf die verfügbaren CPUs und die damit verbundene Auslastung eingestellt. (2 CPU - 100\% - wichtig????!)\\
\ \\
Wichtige Einstellungen im Bereich Netzwerk:\\
NAT - Network Adress Translation - hier werden die Ports eingestellt über welche die VM kommuniziert.\\
Portweiterleitung??!?!?\\
Alle wichtig für lokal development\\
Rule1: Apache / TCP / -empty for any ip / Host: 8080 / Guest : 80 for default HTTP-port for web traffic\\
->Apache - Webbrowser\\
Rule 2: MySQL / TCP / Host: 9306 / Guest: 3306\\
->Verbindung zu MySQL server -> debugging uploading etc.\\
Rule 3: MailCatcher / / 1080 / 1080\\
Receive only Mail-server, dass nicht zufällig E-Mails versandt werden\\
Rule 4: SSH / 2222 / / 22\\
Hierüber kann die VM über die Kommandozeile gesteuert werden\\
- bidirectional - traffic I/O\\
Firewall erwähnen!!! - ist auf den meisten Systemen bereits vorhanden \\
Ports einstellen ist aber kein Ersatz für eine Firewall -- siehe später in squid\\
Auf dem lokalen System -Mac- wird ein Ordner erstellt -sandbox- welcher als gemeinsamer Ordner automatisch eingebunden wird.\\
\ \\
Ubuntu installieren:\\
sudo - superuser do - benötigt um root-befehle zu geben\\
LAMP server für apache / OpenSSH für SSH zugriff\\
localhost - der eigene Computer wird via Loopback zugegriffen!? \\
Ändern des Hostname am Mac für die VM zu sandbox.dev \\
->Aufrufen der hosts datei -> Terminal\\

\begin{center}
\begin{lstlisting}[language=HTML]
$ sudo nano /etc/hosts
\end{lstlisting}
\end{center}

add 127.0.0.1	sandbox.dev\\
Nun kann man sich mit folgendem Befehl auf der VM einloggen.\\
\begin{center}
\begin{lstlisting}[language=HTML]
$ ssh sandbox.dev
\end{lstlisting}
\end{center}

Um nicht jedes mal ein PW eingeben zu müssen und um man-in-the-middle-Attacken zu verhindern, werden nun keys generiert.\\

\begin{center}
\begin{lstlisting}[language=HTML]
$ ssh-keygen -t rsa -C "username@example.com"
\end{lstlisting}
\end{center}

Nun kann noch ein extra pw eingegeben werden, aber da es eine lokale Installation ist, wird das nicht gemacht.\\

Wenn der Private key generiert wurde, wird noch ein public key generiert.\\


\begin{center}
\begin{lstlisting}[language=HTML]
$ ssh -p2222 marc@sandbox.dev mkdir -p .ssh
\end{lstlisting}
\end{center}

Um sich nun direkt auf den Server einloggen zu können:\\

\begin{center}
\begin{lstlisting}[language=HTML]
$ cat ~/.ssh/id_rsa.pub | ssh -p2222 marc@sandbox.dev 'cat >> .ssh/authorized_keys'
\end{lstlisting}
\end{center}

Da nun immer noch ssh -p2222 marc@sandbox.dev geschrieben werden muss - wird die config datei verändert.

\begin{center}
\begin{lstlisting}[language=HTML]
$ nano ~/.ssh/config
\end{lstlisting}
\end{center}

Edit:

Host sandbox.dev
        Port 2222
        User marc

Nun kann man sich einfach mit ssh sandbox.dev auf den Server einloggen (lokal).\\

\ \\


\subsection{Einrichten eines Apache Web-Servers}
Um den Web-Server zu konfigurieren wird dieser zuerst auf den neuesten Stand gebracht.\\
apt - advanced packages tool (packages erklären?!)\\
\ \\
\ \\
ssh sandbox.dev soll nicht jedes mal erwähnt werden.. Abgrenzen mit Farben wann man eingeloggt ist und wann nicht!?
\ \\
\ \\
Da die Installation-disc nicht alle updates beinhaltet: Für alle neuen Installationen und Fehlerbehebungen:\\
- Update -> update list of available packages
\begin{center}
\begin{lstlisting}[language=HTML]
$ sudo apt-get update
\end{lstlisting}
\end{center}

Nun müssen alle erworbenen packages auf den neuesten Stand gebracht werden.
- Upgrade -> upgrade currently installed software
\begin{center}
\begin{lstlisting}[language=HTML]
$ sudo apt-get upgrade 
\end{lstlisting}
\end{center}

Virtual-Box-Integration:\\
Virtual Box verfügt über ein Add-On -> Guest Additions.\\
-> Eine Ansammlung von Treibern und System Programmen -> diese optimieren das OS für Performance und Usability.\\
Dies wird zB beim Filesharing gebraucht - zwischen Host und Guest.\\

\ \\
Man benötigt: build-essential --> tools for compiling\\
und virtual-box-dkms --> Dynamic Kernel Module Support\\
module-assistant --> handles module source packages\\

\ \\
Additional Software?! s. Bilder\\

\begin{center}
\begin{lstlisting}[language=HTML]
$ sudo apt-get install build-essential virtualbox-dkms nano zip unzip curl man-db acpid git module-assistant
\end{lstlisting}
\end{center}

--> sudo reboot\\

--> log back in ssh....\\

\subsubsection{Installation Guest-Additions}
Install Virtual-Box Guest Additions to share Data betw. Guest and hosts:
the shared folder will be %/media/sf_sandbox\\
\ \\
Der mount-command wird benutzt um the device file system to the file tree zu attachen.\\
Man kann auf verschiedenen Content zugreifen - wie zb eine CD.\\
Es wird eine virtuelle CD in das virtuelle Laufwerk der virtualBox gelegt um die Guest Additions zu laden.\\
Zum mounten benötigt man ein device und ein directory\\
\ \\
-> Device: dev cdrom (immer mit slashes)\\
-> directory: media cdrom\\
\ \\
Erstmal die CD einlegen -> Devices -> Insert.... Screenshot!?\\
\ \\ 
Durch ls -la /dev oder /media schauen ob die cdrom files da sind?!
\ \\


Dann mounten:
\begin{center}
\begin{lstlisting}[language=HTML]
$ sudo mount /dev/cdrom /media/cdrom
\end{lstlisting}
\end{center}

Das Terminal zeigt: 

\begin{center}
\begin{lstlisting}[language=HTML]
mount: /dev/sr0 is write-protected, mounting read-only
\end{lstlisting}
\end{center}
Das ist normal. Wie bei einer cd.\\


Nun werden die Guest Additions installiert.\\
\begin{center}
\begin{lstlisting}[language=HTML]
$ sudo sh /media/cdrom/VBoxLinuxAdditions.run --nox11
\end{lstlisting}
\end{center}

--> sudo reboot und ssh back again.\\

Check die geladenen modules.

\begin{center}
\begin{lstlisting}[language=HTML]
$ lsmod | grep vbox
\end{lstlisting}
\end{center}

grep erklären -> vboxsf muss vorhanden sein - shared folder.\\

Nun sollte der media folder überprüft werden:
\begin{center}
\begin{lstlisting}[language=HTML]
$ ls -la /media
\end{lstlisting}
\end{center}
Hier sollte ein Verzeichnis cdrom und ein sf\_sandbox vorhanden sein!!!!\\




\ \\
sh-Command - built in command interpreter
lsmod - lists (s. Bilder)\\


\subsubsection{Zugang zu sf}
Nun muss Zugang zu den shared Folders gewährleistet werden.\\

Da der Ordner sf\_sandbox nicht root sondern Gruppe vboxsf ist hat man bisher keinen Zugriff auf diesen Ordner. Hier für muss der Zugang gewährleistet werden.\\
Für den user marc: \\
\begin{center}
\begin{lstlisting}[language=HTML]
$ sudo usermod -a -G vboxsf marc
\end{lstlisting}
\end{center}

Der Zugang erfolgt nach einmaligem logout. -> logout -> ssh -> Zugang sollte da sein.\\
Der Apache server hat den usernamen www-data -> Dieser braucht ebenfalls zugang zum sf.\\

\begin{center}
\begin{lstlisting}[language=HTML]
$ sudo usermod -a -G vboxsf www-data
\end{lstlisting}
\end{center}


\subsubsection{Linux Konfiguration für den Apache Server}
Der Server weis bisher noch nichts von sf.\\

command sudoedit - overwrite original file:\\
vboxsf - HTTP Apache configuration - copy paste from exercise files\\
wie soll das gehändelt werden??\\

\begin{center}
\begin{lstlisting}[language=HTML]
$ sudoedit sites-available/vboxsf.conf
\end{lstlisting}
\end{center}


Als nächstes die Ports konfigurieren:\\
Apache läuft eigt auf 80 - es wurde aber auf 8080 weiter geleitet\\
ports.conf -> verändern\\

\begin{center}
\begin{lstlisting}[language=HTML]
$ sudoedit ports.conf
\end{lstlisting}
\end{center}

Unter Listen 80 noch Listen 8080 hinzufügen.\\

Managing Apache Sites in Ubuntu s. Bilder \\
\begin{center}
\begin{lstlisting}[language=HTML]
$ sudo a2ensite vboxsf
\end{lstlisting}
\end{center}
\begin{center}
\begin{lstlisting}[language=HTML]
$ sudo a2dissite 000-default
\end{lstlisting}
\end{center}

Managing Apache Modules in Ubuntu s. Bilder \\

\begin{center}
\begin{lstlisting}[language=HTML]
$ sudo a2enmod rewrite vhost_alias
\end{lstlisting}
\end{center}

\ \\
Danach muss der Server neu gestartet werden. Weil Apache neue Group-permissions braucht außerdem wurden die server functionality gechanged durch die modules.\\
\begin{center}
\begin{lstlisting}[language=HTML]
$ sudo service apache2 restart
\end{lstlisting}
\end{center}

Ob der Server funktioniert kann über den Browser herausgefunden werden
\begin{center}
\begin{lstlisting}[language=HTML]
sandbox.dev:8080/server-status
\end{lstlisting}
\end{center}
s.Bilder\\

\subsubsection{PHP Konfiguration}
Da das Front-End in PHP geschrieben werden soll, müssen hier Vorkehrungen getroffen werden.
PHP ist bereits installiert, muss aber für die Entwicklung noch konfiguriert werden.\\
\begin{center}
\begin{lstlisting}[language=HTML]
$ sudoedit /etc/php/7.0/mods-available/phpcustom.ini
\end{lstlisting}
\end{center}


\begin{center}
\begin{lstlisting}[language=HTML]
; Custom shared config
; priority=01
error_reporting=E_ALL
display_errors=On
display_startup_errors=On
error_log=/var/log/php_errors.log
log_errors_max_len=0
memory_limit=256M
post_max_size=100M
upload_max_filesize=100M
\end{lstlisting}
\end{center}

Apache weis nun wo er die errors während der Programmierung hinschreiben soll aber das File exisiert noch nicht.\\
File error\_log erstellen\\
touch command erklären

\begin{center}
\begin{lstlisting}[language=HTML]
$ sudo touch /var/log/php_errors.log
\end{lstlisting}
\end{center}

Permission to read and write to the server.\\
chown-command - change owner and group of files.\\

PHP-App Frameworks s-Bilder\\

\begin{center}
\begin{lstlisting}[language=HTML]
$ sudo apt-get install php-mcrypt php-intl php-sqlite3 php-mbstring php-xml php-gd -y
\end{lstlisting}
\end{center}

Zwei frameworks müssen enabled werden.

\begin{center}
\begin{lstlisting}[language=HTML]
$ sudo phpenmod mbstring simplexml
\end{lstlisting}
\end{center}

sudo service apache2 restart

\subsubsection{MailCatcher}

Benötigte Pakete
\begin{center}
\begin{lstlisting}[language=HTML]
$ sudo apt-get install libsqlite3-dev ruby-dev -y
\end{lstlisting}
\end{center}

Mailcatcher selbst installieren

\begin{center}
\begin{lstlisting}[language=HTML]
$ sudo gem install mailcatcher
\end{lstlisting}
\end{center}

Testmail
\begin{center}
\begin{lstlisting}[language=HTML]
$ php -a
php > mail('target@example.com', 'Testmail', 'Was geht ab', 'From:source@example.com');
\end{lstlisting}
\end{center}


\newpage

\section{Design}
Once the Server is up and running a framework for programming the website is needed to save time and make the application stable and safe in the end. For this Application the choice is a PHP-Framework named Laravel. \\
\\Laravel Begründung?!

At the beginning, the admin-section will be implemented to create users, which will be granted to have access to the Mainframe-Training-Units.\\
\begin{figure}[h]
	\centering
	\includegraphics[scale=0.4]{img/Schemepage.jpg}
	\caption{schematic presentation of the admin/user-section}
	\label{schematic presentation of the admin/user-section}
\end{figure}
\\

\subsection{MVC-Framework}
Laravel is a framework that follows the MVC-Pattern. MVC stands for Model-View-Controller.
\begin{figure}
	\centering
	\includegraphics[scale=0.5]{img/MVC.jpg}
	\caption{Model-View-Controller Pattern}
	\label{Model-View-Controller Pattern}
\end{figure}
\\
\subsubsection{Routing explained}
Routes are established (unter anderem) in the web.php file. In the example we see the Routings that are triggering the AdminsController - the @ triggers a function that is listed in this controller. For example create.
\begin{center}
\begin{lstlisting}[language=PHP]
/* Admin Routing */
Route::get('/admin', 'AdminsController@admin')->name('admin_view');
Route::get('/admin/alter', 'AdminsController@alter')->name('alter_user');
Route::get('/admin/create', 'AdminsController@newUser')->name('new_user');
Route::post('/admin/create', 'AdminsController@create')->name('create_user');
Route::get('/admin/{user_id}', 'AdminsController@show')->name('show_user');
Route::post('/admin/{user_id}', 'AdminsController@modify')->name('update_user');
\end{lstlisting}
\end{center}

The names help to navigate to the pages in an easier manner. With blade you can just define the link to the named paged.\\
\\Blade kurz erklären.

\begin{center}
\begin{lstlisting}[language=HTML]
<a class="hollow button" href="{{ route('show_user', ['user_id' => 1 ]) }}">EDIT</a>
\end{lstlisting}
\end{center}

The create function does nothing but return the view / the file 'createuser.php' that is located in the folder 'admin'.
\begin{center}
\begin{lstlisting}[language=PHP]
    public function create()
    {
      return view('admin/createuser');
    }
\end{lstlisting}
\end{center}

But within the Controller, also different types of data can be generated and passed to the view.\\
In this example hard coded user data is passed to the view 'overview'

\begin{center}
\begin{lstlisting}[language=PHP]
    public function admin()
    {

            $data = [];                     			//data als leeres array definieren

            $obj = new \stdClass;
            $obj->id = 1;
            $obj->title = 'mr';
            $obj->name = 'john';
            $obj->last_name = 'doe';
            $obj->email = 'john@domain.com';
            
            $data['users'][] = $obj;      		//data wird als obj definiert

      return view('admin/overview', $data); 	//pass data to view
    }
\end{lstlisting}
\end{center}

While there will be a view to Add a new user and to modify an existing one, due to the controller there is no need to have two different pages / forms for that. There is just on file containing the form that can be used for both - editing and creating. The File here is form.php\\
In the controller there will be two functions.

\begin{center}
\begin{lstlisting}[language=PHP]
/* 1st Function */
    public function newUser() 
    {
      $data = [];
      $data['modify'] = 0;
      return view('admin/form', $data);
    }

/* 2nd Function */
    public function show($users_id)
    {
      $data = [];
      $data['modify'] = 1;
      return view('admin/form', $data);
    }
\end{lstlisting}
\end{center}

While they both show the same view 'admin/form', the passed data is different. The modify-sequence on line 5 and 13 enables the view to differentiate whether the passed data should be reorganized or added to the database.
This becomes possible through an action that is allocated in the form.php file.
\begin{center}
\begin{lstlisting}[language=PHP]
        <form action="{{ $modify == 1 ? route('update_user', [ 'user_id' => 1]) : route('create_user') }}" method="post">
\end{lstlisting}
\end{center}
Here the status of \$modify is queried and based on this decision the view routes to a particular function that is defined in the AdminsController. If the user is modified, a user-id has to be set.\\

\newpage
\section{Proof of Concept}
\section{Evaluation}

\newpage





%\end{onehalfspacing}

\newpage
\bibliographystyle{plain}
\bibliography{bibfile}


\newpage
\section{Appendices}






\end{document}